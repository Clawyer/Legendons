$(document).ready((function(){$("[data-bs-chart]").each((function(e,t){this.chart=new Chart($(t),$(t).data("bs-chart"))}))})),$((function(){document.getElementById("plateau");var e=document.getElementById("canvas"),t=e.getContext("2d"),o=0,l=[],n=[],a=[],s=[],c=!1;function r(){for(t.clearRect(0,0,e.width,e.height),i=0;i<=o;i++)t.beginPath(),t.moveTo(l[i],n[i]),t.lineTo(a[i],s[i]),t.stroke(),t.closePath(),t.fillStyle="rgb(255,255,255)",t.fillRect(a[i]-12,s[i]-20,30,30),t.fillStyle="rgb(0,0,0)",t.strokeRect(a[i]-12,s[i]-20,30,30),t.fillText(i+1,a[i],s[i])}$("#canvas").mousedown((function(t){c=!0,x0=t.clientX-e.offsetLeft+document.scrollingElement.scrollLeft,y0=t.clientY-e.offsetTop+document.scrollingElement.scrollTop,l[o]=x0,n[o]=y0})),$("#canvas").mousemove((function(t){c&&(x=t.clientX-e.offsetLeft+document.scrollingElement.scrollLeft,y=t.clientY-e.offsetTop+document.scrollingElement.scrollTop,a[o]=x,s[o]=y,r())})),$("#canvas").mouseup((function(d){c&&(c=!1,o++,x=d.clientX-e.offsetLeft+document.scrollingElement.scrollLeft,y=d.clientY-e.offsetTop+document.scrollingElement.scrollTop,t.fillStyle="rgb(255,255,255)",t.fillRect(x-12,y-20,30,30),t.fillStyle="rgb(0,0,0)",t.strokeRect(x-12,y-20,30,30),t.fillText(o,x,y),nouveau=$("<div>").attr("class","ligne").attr("id",o),$("#plateau").append(nouveau),b=$("<button title='Supprimer' class='bouton_ligne' id='"+o+"'>").text(o+" : "),nouveau.append(b),nouveau.append($("<input type='text' class='ligne_saisie' size='30' id='"+o+"'>")),b.on("click",(function(){for(id=parseInt($(this).attr("id")),$("#"+id+".ligne").remove(),i=id+1;i<=o;i++)$("#"+i+".ligne").attr("id",i-1),$("#"+i+".bouton_ligne").attr("id",i-1).text(i-1+" : "),$("#"+i+".ligne_saisie").attr("id",i-1);l.splice(id-1,1),n.splice(id-1,1),a.splice(id-1,1),s.splice(id-1,1),o--,r()})))})),$("#import_image").change((function(){var e=this.files[0];console.log("coucou");var t=new FormData;t.append("image",file),$.post("/upload",t).done(e=>console.log(e)),console.log(e),$("#canvas").css("background-images",'url("'+e.name+'")');var i=new Image;i.src=e.name,i.addEventListener("load",(function(){h=500*this.naturalHeight/this.naturalWidth,$("#canvas").attr("height",h)})),o=0,l=[],n=[],a=[],s=[],$(".ligne").remove()}))})),function(e){"use strict";e("#sidebarToggle, #sidebarToggleTop").on("click",(function(t){e("body").toggleClass("sidebar-toggled"),e(".sidebar").toggleClass("toggled"),e(".sidebar").hasClass("toggled")&&e(".sidebar .collapse").collapse("hide")})),e(window).resize((function(){e(window).width()<768&&e(".sidebar .collapse").collapse("hide")})),e("body.fixed-nav .sidebar").on("mousewheel DOMMouseScroll wheel",(function(t){if(e(window).width()>768){var i=t.originalEvent,o=i.wheelDelta||-i.detail;this.scrollTop+=30*(o<0?1:-1),t.preventDefault()}})),e(document).on("scroll",(function(){e(this).scrollTop()>100?e(".scroll-to-top").fadeIn():e(".scroll-to-top").fadeOut()})),e(document).on("click","a.scroll-to-top",(function(t){var i=e(this);e("html, body").stop().animate({scrollTop:e(i.attr("href")).offset().top},1e3,"easeInOutExpo"),t.preventDefault()}))}(jQuery);